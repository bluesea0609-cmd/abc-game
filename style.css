// é€™è£¡æœ‰åœ–æ¡ˆ(Emoji)ã€è‹±æ–‡å–®å­—
const data = [
  { text: "Apple", icon: "ğŸ" },
  { text: "Ball", icon: "âš½" },
  { text: "Cat", icon: "ğŸ±" },
  { text: "Dog", icon: "ğŸ¶" },
  { text: "Egg", icon: "ğŸ¥š" },
  { text: "Fish", icon: "ğŸŸ" },
  { text: "Goat", icon: "ğŸ" },
  { text: "Hat", icon: "ğŸ©" },
  { text: "Ice", icon: "ğŸ§Š" },
  { text: "Juice", icon: "ğŸ§ƒ" }
];

let score = 0;
let isGameMode = false;
let currentTarget = null;
const gameArea = document.getElementById("game-area");
const msgDisplay = document.getElementById("message");
const scoreDisplay = document.getElementById("score");

// ç™¼éŸ³åŠŸèƒ½
function speak(text) {
  // å…ˆå–æ¶ˆä¹‹å‰çš„ç™¼éŸ³ï¼Œé¿å…é‡ç–Š
  window.speechSynthesis.cancel();
  const msg = new SpeechSynthesisUtterance(text);
  msg.lang = "en-US";
  window.speechSynthesis.speak(msg);
}

// 1. å­¸ç¿’æ¨¡å¼ (Study Mode)
function startReview() {
  isGameMode = false;
  score = 0;
  updateScore();
  msgDisplay.innerText = "Tap card to learn! ğŸ”Š";
  renderCards();
  speak("Let's learn!");
}

// 2. éŠæˆ²æ¨¡å¼ (Game Mode)
function startGame() {
  isGameMode = true;
  score = 0;
  updateScore();
  renderCards();
  nextQuestion();
}

function nextQuestion() {
  // éš¨æ©Ÿé¸ä¸€å€‹å–®å­—ç•¶é¡Œç›®
  const randomIndex = Math.floor(Math.random() * data.length);
  currentTarget = data[randomIndex];
  
  msgDisplay.innerText = `Find: ${currentTarget.text} â“`;
  speak(`Where is the ${currentTarget.text}?`);
}

function renderCards() {
  gameArea.innerHTML = "";
  data.forEach(item => {
    const card = document.createElement("div");
    card.className = "card";
    // å¡ç‰‡ä¸Šç›´æ¥é¡¯ç¤ºåœ–æ¡ˆå’Œå–®å­—
    card.innerHTML = `<div>${item.icon}</div><div>${item.text}</div>`;
    
    card.onclick = () => {
      if (isGameMode) {
        checkAnswer(item);
      } else {
        // å­¸ç¿’æ¨¡å¼ï¼šåªå”¸å–®å­—
        speak(item.text);
        // å¡ç‰‡è·³å‹•ä¸€ä¸‹
        card.style.transform = "scale(1.1)";
        setTimeout(() => card.style.transform = "scale(1)", 200);
      }
    };
    gameArea.appendChild(card);
  });
}

function checkAnswer(item) {
  if (item.text === currentTarget.text) {
    // ç­”å°äº†ï¼
    score += 10;
    msgDisplay.innerText = "Correct! ğŸ‰";
    speak("Good job!");
    updateScore();
    // 1ç§’å¾Œå‡ºä¸‹ä¸€é¡Œ
    setTimeout(nextQuestion, 1000);
  } else {
    // ç­”éŒ¯äº†ï¼
    score -= 5;
    if(score < 0) score = 0;
    msgDisplay.innerText = "Try again! âŒ";
    speak("Oh no, try again.");
    updateScore();
  }
}

function updateScore() {
  scoreDisplay.innerText = score;
}

// ä¸€é–‹å§‹å…ˆé€²å…¥å­¸ç¿’æ¨¡å¼
startReview();
    a
